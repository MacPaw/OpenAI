<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Index  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="Index  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html"> Docs</a> (100% documented)</p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">Index</a>
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/OpenAI.html">OpenAI</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/OpenAI/Configuration.html">– Configuration</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/OpenAIError.html">OpenAIError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Model.html">Model</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/OpenAIProtocol.html">OpenAIProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/APIError.html">APIError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/APIErrorResponse.html">APIErrorResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioSpeechQuery.html">AudioSpeechQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioSpeechQuery/AudioSpeechVoice.html">– AudioSpeechVoice</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioSpeechQuery/AudioSpeechResponseFormat.html">– AudioSpeechResponseFormat</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioSpeechQuery/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioSpeechQuery/Speed.html">– Speed</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioSpeechResult.html">AudioSpeechResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioTranscriptionQuery.html">AudioTranscriptionQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioTranscriptionQuery/ResponseFormat.html">– ResponseFormat</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioTranscriptionQuery/FileType.html">– FileType</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioTranscriptionResult.html">AudioTranscriptionResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioTranslationQuery.html">AudioTranslationQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AudioTranslationResult.html">AudioTranslationResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatQuery.html">ChatQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatQuery/ChatCompletionMessageParam.html">– ChatCompletionMessageParam</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatQuery/Stop.html">– Stop</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatQuery/ResponseFormat.html">– ResponseFormat</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatQuery/ChatCompletionFunctionCallOptionParam.html">– ChatCompletionFunctionCallOptionParam</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatQuery/ChatCompletionToolParam.html">– ChatCompletionToolParam</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatQuery/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatResult.html">ChatResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatResult/Choice.html">– Choice</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatResult/CompletionUsage.html">– CompletionUsage</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatResult/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatStreamResult.html">ChatStreamResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatStreamResult/Choice.html">– Choice</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChatStreamResult/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CompletionsQuery.html">CompletionsQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CompletionsResult.html">CompletionsResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CompletionsResult/Usage.html">– Usage</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CompletionsResult/Choice.html">– Choice</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EditsQuery.html">EditsQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EditsResult.html">EditsResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EditsResult/Choice.html">– Choice</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EditsResult/Usage.html">– Usage</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EmbeddingsQuery.html">EmbeddingsQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EmbeddingsQuery/Input.html">– Input</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EmbeddingsQuery/EncodingFormat.html">– EncodingFormat</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EmbeddingsQuery/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EmbeddingsResult.html">EmbeddingsResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EmbeddingsResult/Embedding.html">– Embedding</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EmbeddingsResult/Usage.html">– Usage</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageEditsQuery.html">ImageEditsQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageEditsQuery/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageVariationsQuery.html">ImageVariationsQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImageVariationsQuery/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImagesQuery.html">ImagesQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImagesQuery/ResponseFormat.html">– ResponseFormat</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImagesQuery/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImagesQuery/Style.html">– Style</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImagesQuery/Quality.html">– Quality</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImagesQuery/Size.html">– Size</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImagesResult.html">ImagesResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ImagesResult/Image.html">– Image</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ModelQuery.html">ModelQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ModelResult.html">ModelResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ModelResult/CodingKeys.html">– CodingKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ModelsResult.html">ModelsResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ModerationsQuery.html">ModerationsQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ModerationsResult.html">ModerationsResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ModerationsResult/Moderation.html">– Moderation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Vector.html">Vector</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:6OpenAI5Modela">Model</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='openai' class='heading'>OpenAI</h1>

<p><img src="https://user-images.githubusercontent.com/1411778/218319355-f56b6bd4-961a-4d8f-82cd-6dbd43111d7f.png" alt="logo"></p>

<hr>

<p><img src="https://github.com/MacPaw/OpenAI/actions/workflows/swift.yml/badge.svg" alt="Swift Workflow">
<a href="https://swiftpackageindex.com/MacPaw/OpenAI"><img src="https://img.shields.io/endpoint?url=https%3A%2F%2Fswiftpackageindex.com%2Fapi%2Fpackages%2FMacPaw%2FOpenAI%2Fbadge%3Ftype%3Dswift-versions" alt=""></a>
<a href="https://swiftpackageindex.com/MacPaw/OpenAI"><img src="https://img.shields.io/endpoint?url=https%3A%2F%2Fswiftpackageindex.com%2Fapi%2Fpackages%2FMacPaw%2FOpenAI%2Fbadge%3Ftype%3Dplatforms" alt=""></a>
<a href="https://twitter.com/MacPaw"><img src="https://img.shields.io/static/v1?label=Twitter&message=@MacPaw&color=CA1F67" alt="Twitter"></a></p>

<p>This repository contains Swift community-maintained implementation over <a href="https://platform.openai.com/docs/api-reference/">OpenAI</a> public API. </p>

<ul>
<li><a href="#what-is-openai">What is OpenAI</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a>

<ul>
<li><a href="#initialization">Initialization</a></li>
<li><a href="#completions">Completions</a>

<ul>
<li><a href="#completions-streaming">Completions Streaming</a></li>
</ul></li>
<li><a href="#chats">Chats</a>

<ul>
<li><a href="#chats-streaming">Chats Streaming</a></li>
</ul></li>
<li><a href="#images">Images</a>

<ul>
<li><a href="#create-image">Create Image</a></li>
<li><a href="#create-image-edit">Create Image Edit</a></li>
<li><a href="#create-image-variation">Create Image Variation</a></li>
</ul></li>
<li><a href="#audio">Audio</a>

<ul>
<li><a href="#audio-create-speech">Audio Create Speech</a></li>
<li><a href="#audio-transcriptions">Audio Transcriptions</a></li>
<li><a href="#audio-translations">Audio Translations</a></li>
</ul></li>
<li><a href="#edits">Edits</a></li>
<li><a href="#embeddings">Embeddings</a></li>
<li><a href="#models">Models</a>

<ul>
<li><a href="#list-models">List Models</a></li>
<li><a href="#retrieve-model">Retrieve Model</a></li>
</ul></li>
<li><a href="#moderations">Moderations</a></li>
<li><a href="#utilities">Utilities</a></li>
<li><a href="#combine-extensions">Combine Extensions</a></li>
</ul></li>
<li><a href="#example-project">Example Project</a></li>
<li><a href="#contribution-guidelines">Contribution Guidelines</a></li>
<li><a href="#links">Links</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 id='what-is-openai' class='heading'>What is OpenAI</h2>

<p>OpenAI is a non-profit artificial intelligence research organization founded in San Francisco, California in 2015. It was created with the purpose of advancing digital intelligence in ways that benefit humanity as a whole and promote societal progress. The organization strives to develop AI (Artificial Intelligence) programs and systems that can think, act and adapt quickly on their own – autonomously. OpenAI&rsquo;s mission is to ensure safe and responsible use of AI for civic good, economic growth and other public benefits; this includes cutting-edge research into important topics such as general AI safety, natural language processing, applied reinforcement learning methods, machine vision algorithms etc.</p>

<blockquote>
<p>The OpenAI API can be applied to virtually any task that involves understanding or generating natural language or code. We offer a spectrum of models with different levels of power suitable for different tasks, as well as the ability to fine-tune your own custom models. These models can be used for everything from content generation to semantic search and classification.</p>
</blockquote>
<h2 id='installation' class='heading'>Installation</h2>

<p>OpenAI is available with Swift Package Manager.
The Swift Package Manager is a tool for automating the distribution of Swift code and is integrated into the swift compiler.
Once you have your Swift package set up, adding OpenAI as a dependency is as easy as adding it to the dependencies value of your Package.swift.</p>
<pre class="highlight swift"><code><span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/MacPaw/OpenAI.git"</span><span class="p">,</span> <span class="nv">branch</span><span class="p">:</span> <span class="s">"main"</span><span class="p">)</span>
<span class="p">]</span>
</code></pre>
<h2 id='usage' class='heading'>Usage</h2>
<h3 id='initialization' class='heading'>Initialization</h3>

<p>To initialize API instance you need to <a href="https://platform.openai.com/account/api-keys">obtain</a> API token from your Open AI organization.</p>

<p><strong>Remember that your API key is a secret!</strong> Do not share it with others or expose it in any client-side code (browsers, apps). Production requests must be routed through your own backend server where your API key can be securely loaded from an environment variable or key management service.</p>

<p><img width="1081" alt="company" src="https://user-images.githubusercontent.com/1411778/213204726-0772373e-14db-4d5d-9a58-bc249bac4c57.png"></p>

<p>Once you have a token, you can initialize <code><a href="Classes/OpenAI.html">OpenAI</a></code> class, which is an entry point to the API.</p>

<blockquote>
<p>⚠️ OpenAI strongly recommends developers of client-side applications proxy requests through a separate backend service to keep their API key safe. API keys can access and manipulate customer billing, usage, and organizational data, so it&rsquo;s a significant risk to <a href="https://nshipster.com/secrets/">expose</a> them.</p>
</blockquote>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">openAI</span> <span class="o">=</span> <span class="kt">OpenAI</span><span class="p">(</span><span class="nv">apiToken</span><span class="p">:</span> <span class="s">"YOUR_TOKEN_HERE"</span><span class="p">)</span>
</code></pre>

<p>Optionally you can initialize <code><a href="Classes/OpenAI.html">OpenAI</a></code> with token, organization identifier and timeoutInterval.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">configuration</span> <span class="o">=</span> <span class="kt">OpenAI</span><span class="o">.</span><span class="kt">Configuration</span><span class="p">(</span><span class="nv">token</span><span class="p">:</span> <span class="s">"YOUR_TOKEN_HERE"</span><span class="p">,</span> <span class="nv">organizationIdentifier</span><span class="p">:</span> <span class="s">"YOUR_ORGANIZATION_ID_HERE"</span><span class="p">,</span> <span class="nv">timeoutInterval</span><span class="p">:</span> <span class="mf">60.0</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">openAI</span> <span class="o">=</span> <span class="kt">OpenAI</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span>
</code></pre>

<p>Once token you posses the token, and the instance is initialized you are ready to make requests.</p>
<h3 id='completions' class='heading'>Completions</h3>

<p>Given a prompt, the model will return one or more predicted completions, and can also return the probabilities of alternative tokens at each position.</p>

<p><strong>Request</strong></p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">CompletionsQuery</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="c1">/// ID of the model to use.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span>
    <span class="c1">/// The prompt(s) to generate completions for, encoded as a string, array of strings, array of tokens, or array of token arrays.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">prompt</span><span class="p">:</span> <span class="kt">String</span>
    <span class="c1">/// What sampling temperature to use. Higher values means the model will take more risks. Try 0.9 for more creative applications, and 0 (argmax sampling) for ones with a well-defined answer.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">temperature</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
    <span class="c1">/// The maximum number of tokens to generate in the completion.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">maxTokens</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span>
    <span class="c1">/// An alternative to sampling with temperature, called nucleus sampling, where the model considers the results of the tokens with top_p probability mass. So 0.1 means only the tokens comprising the top 10% probability mass are considered.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">topP</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
    <span class="c1">/// Number between -2.0 and 2.0. Positive values penalize new tokens based on their existing frequency in the text so far, decreasing the model's likelihood to repeat the same line verbatim.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">frequencyPenalty</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
    <span class="c1">/// Number between -2.0 and 2.0. Positive values penalize new tokens based on whether they appear in the text so far, increasing the model's likelihood to talk about new topics.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">presencePenalty</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
    <span class="c1">/// Up to 4 sequences where the API will stop generating further tokens. The returned text will not contain the stop sequence.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">stop</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">]?</span>
    <span class="c1">/// A unique identifier representing your end-user, which can help OpenAI to monitor and detect abuse.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">user</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
<span class="p">}</span>
</code></pre>

<p><strong>Response</strong></p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">CompletionsResult</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Choice</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">text</span><span class="p">:</span> <span class="kt">String</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">index</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">created</span><span class="p">:</span> <span class="kt">TimeInterval</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">choices</span><span class="p">:</span> <span class="p">[</span><span class="kt">Choice</span><span class="p">]</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">usage</span><span class="p">:</span> <span class="kt">Usage</span>
<span class="p">}</span>
</code></pre>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">CompletionsQuery</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="o">.</span><span class="n">textDavinci_003</span><span class="p">,</span> <span class="nv">prompt</span><span class="p">:</span> <span class="s">"What is 42?"</span><span class="p">,</span> <span class="nv">temperature</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">maxTokens</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="nv">topP</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">frequencyPenalty</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">presencePenalty</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">stop</span><span class="p">:</span> <span class="p">[</span><span class="s">"</span><span class="se">\\</span><span class="s">n"</span><span class="p">])</span>
<span class="n">openAI</span><span class="o">.</span><span class="nf">completions</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
  <span class="c1">//Handle result here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">completions</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>
<pre class="highlight plaintext"><code>(lldb) po result
▿ CompletionsResult
  - id : "cmpl-6P9be2p2fQlwB7zTOl0NxCOetGmX3"
  - object : "text_completion"
  - created : 1671453146.0
  - model : OpenAI.Model.textDavinci_003
  ▿ choices : 1 element
    ▿ 0 : Choice
      - text : "\n\n42 is the answer to the ultimate question of life, the universe, and everything, according to the book The Hitchhiker\'s Guide to the Galaxy."
      - index : 0
</code></pre>
<h4 id='completions-streaming' class='heading'>Completions Streaming</h4>

<p>Completions streaming is available by using <code>completionsStream</code> function. Tokens will be sent one-by-one.</p>

<p><strong>Closures</strong></p>
<pre class="highlight swift"><code><span class="n">openAI</span><span class="o">.</span><span class="nf">completionsStream</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">partialResult</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">partialResult</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">result</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">choices</span><span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
        <span class="c1">//Handle chunk error here</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="nv">completion</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
    <span class="c1">//Handle streaming error here</span>
<span class="p">}</span>
</code></pre>

<p><strong>Combine</strong></p>
<pre class="highlight swift"><code><span class="n">openAI</span>
    <span class="o">.</span><span class="nf">completionsStream</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sink</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
        <span class="c1">//Handle completion result here</span>
    <span class="p">}</span> <span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="c1">//Handle chunk here</span>
    <span class="p">}</span><span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">cancellables</span><span class="p">)</span>
</code></pre>

<p><strong>Structured concurrency</strong></p>
<pre class="highlight swift"><code><span class="k">for</span> <span class="k">try</span> <span class="k">await</span> <span class="n">result</span> <span class="k">in</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">completionsStream</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//Handle result here</span>
<span class="p">}</span>
</code></pre>

<p>Review <a href="https://platform.openai.com/docs/api-reference/completions">Completions Documentation</a> for more info.</p>
<h3 id='chats' class='heading'>Chats</h3>

<p>Using the OpenAI Chat API, you can build your own applications with <code>gpt-3.5-turbo</code> to do things like:</p>

<ul>
<li>Draft an email or other piece of writing</li>
<li>Write Python code</li>
<li>Answer questions about a set of documents</li>
<li>Create conversational agents</li>
<li>Give your software a natural language interface</li>
<li>Tutor in a range of subjects</li>
<li>Translate languages</li>
<li>Simulate characters for video games and much more</li>
</ul>

<p><strong>Request</strong></p>
<pre class="highlight swift"><code> <span class="kd">struct</span> <span class="kt">ChatQuery</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
     <span class="c1">/// ID of the model to use. Currently, only gpt-3.5-turbo and gpt-3.5-turbo-0301 are supported.</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span>
     <span class="c1">/// The messages to generate chat completions for</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">messages</span><span class="p">:</span> <span class="p">[</span><span class="kt">Chat</span><span class="p">]</span>
     <span class="c1">/// A list of functions the model may generate JSON inputs for.</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">functions</span><span class="p">:</span> <span class="p">[</span><span class="kt">ChatFunctionDeclaration</span><span class="p">]?</span>
     <span class="c1">/// What sampling temperature to use, between 0 and 2. Higher values like 0.8 will make the output more random, while lower values like 0.2 will make it more focused and  We generally recommend altering this or top_p but not both.</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">temperature</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
     <span class="c1">/// An alternative to sampling with temperature, called nucleus sampling, where the model considers the results of the tokens with top_p probability mass. So 0.1 means only the tokens comprising the top 10% probability mass are considered.</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">topP</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
     <span class="c1">/// How many chat completion choices to generate for each input message.</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">n</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span>
     <span class="c1">/// Up to 4 sequences where the API will stop generating further tokens. The returned text will not contain the stop sequence.</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">stop</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">]?</span>
     <span class="c1">/// The maximum number of tokens to generate in the completion.</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">maxTokens</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span>
     <span class="c1">/// Number between -2.0 and 2.0. Positive values penalize new tokens based on whether they appear in the text so far, increasing the model's likelihood to talk about new topics.</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">presencePenalty</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
     <span class="c1">/// Number between -2.0 and 2.0. Positive values penalize new tokens based on their existing frequency in the text so far, decreasing the model's likelihood to repeat the same line verbatim.</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">frequencyPenalty</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
     <span class="c1">///Modify the likelihood of specified tokens appearing in the completion.</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">logitBias</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span><span class="kt">Int</span><span class="p">]?</span>
     <span class="c1">/// A unique identifier representing your end-user, which can help OpenAI to monitor and detect abuse.</span>
     <span class="kd">public</span> <span class="k">let</span> <span class="nv">user</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
<span class="p">}</span>
</code></pre>

<p><strong>Response</strong></p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">ChatResult</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Choice</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">index</span><span class="p">:</span> <span class="kt">Int</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">message</span><span class="p">:</span> <span class="kt">Chat</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">finishReason</span><span class="p">:</span> <span class="kt">String</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Usage</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">promptTokens</span><span class="p">:</span> <span class="kt">Int</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">completionTokens</span><span class="p">:</span> <span class="kt">Int</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">totalTokens</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">created</span><span class="p">:</span> <span class="kt">TimeInterval</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">choices</span><span class="p">:</span> <span class="p">[</span><span class="kt">Choice</span><span class="p">]</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">usage</span><span class="p">:</span> <span class="kt">Usage</span>
<span class="p">}</span>
</code></pre>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">ChatQuery</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="o">.</span><span class="n">gpt3_5Turbo</span><span class="p">,</span> <span class="nv">messages</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">role</span><span class="p">:</span> <span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="nv">content</span><span class="p">:</span> <span class="s">"who are you"</span><span class="p">)])</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">chats</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>
<pre class="highlight plaintext"><code>(lldb) po result
▿ ChatResult
  - id : "chatcmpl-6pwjgxGV2iPP4QGdyOLXnTY0LE3F8"
  - object : "chat.completion"
  - created : 1677838528.0
  - model : "gpt-3.5-turbo-0301"
  ▿ choices : 1 element
    ▿ 0 : Choice
      - index : 0
      ▿ message : Chat
        - role : "assistant"
        - content : "\n\nI\'m an AI language model developed by OpenAI, created to provide assistance and support for various tasks such as answering questions, generating text, and providing recommendations. Nice to meet you!"
      - finish_reason : "stop"
  ▿ usage : Usage
    - prompt_tokens : 10
    - completion_tokens : 39
    - total_tokens : 49
</code></pre>
<h4 id='chats-streaming' class='heading'>Chats Streaming</h4>

<p>Chats streaming is available by using <code>chatStream</code> function. Tokens will be sent one-by-one.</p>

<p><strong>Closures</strong></p>
<pre class="highlight swift"><code><span class="n">openAI</span><span class="o">.</span><span class="nf">chatsStream</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">partialResult</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">partialResult</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">result</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">choices</span><span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
        <span class="c1">//Handle chunk error here</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="nv">completion</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
    <span class="c1">//Handle streaming error here</span>
<span class="p">}</span>
</code></pre>

<p><strong>Combine</strong></p>
<pre class="highlight swift"><code><span class="n">openAI</span>
    <span class="o">.</span><span class="nf">chatsStream</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sink</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
        <span class="c1">//Handle completion result here</span>
    <span class="p">}</span> <span class="nv">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="c1">//Handle chunk here</span>
    <span class="p">}</span><span class="o">.</span><span class="nf">store</span><span class="p">(</span><span class="nv">in</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">cancellables</span><span class="p">)</span>
</code></pre>

<p><strong>Structured concurrency</strong></p>
<pre class="highlight swift"><code><span class="k">for</span> <span class="k">try</span> <span class="k">await</span> <span class="n">result</span> <span class="k">in</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">chatsStream</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span>
   <span class="c1">//Handle result here</span>
<span class="p">}</span>
</code></pre>

<p><strong>Function calls</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">openAI</span> <span class="o">=</span> <span class="kt">OpenAI</span><span class="p">(</span><span class="nv">apiToken</span><span class="p">:</span> <span class="s">"..."</span><span class="p">)</span>
<span class="c1">// Declare functions which GPT-3 might decide to call.</span>
<span class="k">let</span> <span class="nv">functions</span> <span class="o">=</span> <span class="p">[</span>
  <span class="kt">ChatFunctionDeclaration</span><span class="p">(</span>
      <span class="nv">name</span><span class="p">:</span> <span class="s">"get_current_weather"</span><span class="p">,</span>
      <span class="nv">description</span><span class="p">:</span> <span class="s">"Get the current weather in a given location"</span><span class="p">,</span>
      <span class="nv">parameters</span><span class="p">:</span>
        <span class="kt">JSONSchema</span><span class="p">(</span>
          <span class="nv">type</span><span class="p">:</span> <span class="o">.</span><span class="n">object</span><span class="p">,</span>
          <span class="nv">properties</span><span class="p">:</span> <span class="p">[</span>
            <span class="s">"location"</span><span class="p">:</span> <span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="nv">description</span><span class="p">:</span> <span class="s">"The city and state, e.g. San Francisco, CA"</span><span class="p">),</span>
            <span class="s">"unit"</span><span class="p">:</span> <span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">type</span><span class="p">:</span> <span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="nv">enumValues</span><span class="p">:</span> <span class="p">[</span><span class="s">"celsius"</span><span class="p">,</span> <span class="s">"fahrenheit"</span><span class="p">])</span>
          <span class="p">],</span>
          <span class="nv">required</span><span class="p">:</span> <span class="p">[</span><span class="s">"location"</span><span class="p">]</span>
        <span class="p">)</span>
  <span class="p">)</span>
<span class="p">]</span>
<span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">ChatQuery</span><span class="p">(</span>
  <span class="nv">model</span><span class="p">:</span> <span class="s">"gpt-3.5-turbo-0613"</span><span class="p">,</span>  <span class="c1">// 0613 is the earliest version with function calls support.</span>
  <span class="nv">messages</span><span class="p">:</span> <span class="p">[</span>
      <span class="kt">Chat</span><span class="p">(</span><span class="nv">role</span><span class="p">:</span> <span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="nv">content</span><span class="p">:</span> <span class="s">"What's the weather like in Boston?"</span><span class="p">)</span>
  <span class="p">],</span>
  <span class="nv">functions</span><span class="p">:</span> <span class="n">functions</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">chats</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>

<p>Result will be (serialized as JSON here for readability):</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"chatcmpl-1234"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"chat.completion"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="mi">1686000000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gpt-3.5-turbo-0613"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"choices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assistant"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"function_call"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"get_current_weather"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"arguments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">location</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Boston, MA</span><span class="se">\"\n</span><span class="s2">}"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"finish_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"function_call"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"usage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"total_tokens"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="nl">"completion_tokens"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="nl">"prompt_tokens"</span><span class="p">:</span><span class="w"> </span><span class="mi">82</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<p>Review <a href="https://platform.openai.com/docs/guides/chat">Chat Documentation</a> for more info.</p>
<h3 id='images' class='heading'>Images</h3>

<p>Given a prompt and/or an input image, the model will generate a new image.</p>

<p>As Artificial Intelligence continues to develop, so too does the intriguing concept of Dall-E. Developed by OpenAI, a research lab for artificial intelligence purposes, Dall-E has been classified as an AI system that can generate images based on descriptions provided by humans. With its potential applications spanning from animation and illustration to design and engineering - not to mention the endless possibilities in between - it&rsquo;s easy to see why there is such excitement over this new technology.</p>
<h3 id='create-image' class='heading'>Create Image</h3>

<p><strong>Request</strong></p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">ImagesQuery</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="c1">/// A text description of the desired image(s). The maximum length is 1000 characters.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">prompt</span><span class="p">:</span> <span class="kt">String</span>
    <span class="c1">/// The number of images to generate. Must be between 1 and 10.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">n</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span>
    <span class="c1">/// The size of the generated images. Must be one of 256x256, 512x512, or 1024x1024.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">size</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
<span class="p">}</span>
</code></pre>

<p><strong>Response</strong></p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">ImagesResult</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">struct</span> <span class="kt">URLResult</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">String</span>
    <span class="p">}</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">created</span><span class="p">:</span> <span class="kt">TimeInterval</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">URLResult</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">ImagesQuery</span><span class="p">(</span><span class="nv">prompt</span><span class="p">:</span> <span class="s">"White cat with heterochromia sitting on the kitchen table"</span><span class="p">,</span> <span class="nv">n</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">size</span><span class="p">:</span> <span class="s">"1024x1024"</span><span class="p">)</span>
<span class="n">openAI</span><span class="o">.</span><span class="nf">images</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
  <span class="c1">//Handle result here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">images</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>
<pre class="highlight plaintext"><code>(lldb) po result
▿ ImagesResult
  - created : 1671453505.0
  ▿ data : 1 element
    ▿ 0 : URLResult
      - url : "https://oaidalleapiprodscus.blob.core.windows.net/private/org-CWjU5cDIzgCcVjq10pp5yX5Q/user-GoBXgChvLBqLHdBiMJBUbPqF/img-WZVUK2dOD4HKbKwW1NeMJHBd.png?st=2022-12-19T11%3A38%3A25Z&amp;se=2022-12-19T13%3A38%3A25Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2022-12-19T09%3A35%3A16Z&amp;ske=2022-12-20T09%3A35%3A16Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=mh52rmtbQ8CXArv5bMaU6lhgZHFBZz/ePr4y%2BJwLKOc%3D"
</code></pre>

<p><strong>Generated image</strong></p>

<p><img src="https://user-images.githubusercontent.com/1411778/213134082-ba988a72-fca0-4213-8805-63e5f8324cab.png" alt="Generated Image"></p>
<h3 id='create-image-edit' class='heading'>Create Image Edit</h3>

<p>Creates an edited or extended image given an original image and a prompt.</p>

<p><strong>Request</strong></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">ImageEditsQuery</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="c1">/// The image to edit. Must be a valid PNG file, less than 4MB, and square. If mask is not provided, image must have transparency, which will be used as the mask.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">image</span><span class="p">:</span> <span class="kt">Data</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fileName</span><span class="p">:</span> <span class="kt">String</span>
    <span class="c1">/// An additional image whose fully transparent areas (e.g. where alpha is zero) indicate where image should be edited. Must be a valid PNG file, less than 4MB, and have the same dimensions as image.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">mask</span><span class="p">:</span> <span class="kt">Data</span><span class="p">?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">maskFileName</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    <span class="c1">/// A text description of the desired image(s). The maximum length is 1000 characters.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">prompt</span><span class="p">:</span> <span class="kt">String</span>
    <span class="c1">/// The number of images to generate. Must be between 1 and 10.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">n</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span>
    <span class="c1">/// The size of the generated images. Must be one of 256x256, 512x512, or 1024x1024.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">size</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
<span class="p">}</span>
</code></pre>

<p><strong>Response</strong></p>

<p>Uses the ImagesResult response similarly to ImagesQuery.</p>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="nf">pngData</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">ImageEditQuery</span><span class="p">(</span><span class="nv">image</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="nv">fileName</span><span class="p">:</span> <span class="s">"whitecat.png"</span><span class="p">,</span> <span class="nv">prompt</span><span class="p">:</span> <span class="s">"White cat with heterochromia sitting on the kitchen table with a bowl of food"</span><span class="p">,</span> <span class="nv">n</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">size</span><span class="p">:</span> <span class="s">"1024x1024"</span><span class="p">)</span>
<span class="n">openAI</span><span class="o">.</span><span class="nf">imageEdits</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
  <span class="c1">//Handle result here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">imageEdits</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>
<h3 id='create-image-variation' class='heading'>Create Image Variation</h3>

<p>Creates a variation of a given image.</p>

<p><strong>Request</strong></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">ImageVariationsQuery</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="c1">/// The image to edit. Must be a valid PNG file, less than 4MB, and square. If mask is not provided, image must have transparency, which will be used as the mask.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">image</span><span class="p">:</span> <span class="kt">Data</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fileName</span><span class="p">:</span> <span class="kt">String</span>
    <span class="c1">/// The number of images to generate. Must be between 1 and 10.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">n</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span>
    <span class="c1">/// The size of the generated images. Must be one of 256x256, 512x512, or 1024x1024.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">size</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
<span class="p">}</span>
</code></pre>

<p><strong>Response</strong></p>

<p>Uses the ImagesResult response similarly to ImagesQuery.</p>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="nf">pngData</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">ImageVariationQuery</span><span class="p">(</span><span class="nv">image</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="nv">fileName</span><span class="p">:</span> <span class="s">"whitecat.png"</span><span class="p">,</span> <span class="nv">n</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">size</span><span class="p">:</span> <span class="s">"1024x1024"</span><span class="p">)</span>
<span class="n">openAI</span><span class="o">.</span><span class="nf">imageVariations</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
  <span class="c1">//Handle result here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">imageVariations</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>

<p>Review <a href="https://platform.openai.com/docs/api-reference/images">Images Documentation</a> for more info.</p>
<h3 id='audio' class='heading'>Audio</h3>

<p>The speech to text API provides two endpoints, transcriptions and translations, based on our state-of-the-art open source large-v2 <a href="https://openai.com/research/whisper">Whisper model</a>. They can be used to:</p>

<p>Transcribe audio into whatever language the audio is in.
Translate and transcribe the audio into english.
File uploads are currently limited to 25 MB and the following input file types are supported: mp3, mp4, mpeg, mpga, m4a, wav, and webm.</p>
<h4 id='audio-create-speech' class='heading'>Audio Create Speech</h4>

<p>This function sends an <code><a href="Structs/AudioSpeechQuery.html">AudioSpeechQuery</a></code> to the OpenAI API to create audio speech from text using a specific voice and format. </p>

<p><a href="https://platform.openai.com/docs/guides/text-to-speech/voice-options">Learn more about voices.</a><br>
<a href="https://platform.openai.com/docs/models/tts">Learn more about models.</a></p>

<p><strong>Request:</strong>  </p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">AudioSpeechQuery</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>
    <span class="c1">//...</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span> <span class="c1">// tts-1 or tts-1-hd  </span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">input</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">voice</span><span class="p">:</span> <span class="kt">AudioSpeechVoice</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">responseFormat</span><span class="p">:</span> <span class="kt">AudioSpeechResponseFormat</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">speed</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="c1">// Initializes with Double?</span>
    <span class="c1">//...</span>
<span class="p">}</span>
</code></pre>

<p><strong>Response:</strong></p>
<pre class="highlight swift"><code><span class="c1">/// Audio data for one of the following formats :`mp3`, `opus`, `aac`, `flac`</span>
<span class="kd">public</span> <span class="k">let</span> <span class="nv">audioData</span><span class="p">:</span> <span class="kt">Data</span><span class="p">?</span>
</code></pre>

<p><strong>Example:</strong>   </p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">AudioSpeechQuery</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="o">.</span><span class="n">tts_1</span><span class="p">,</span> <span class="nv">input</span><span class="p">:</span> <span class="s">"Hello, world!"</span><span class="p">,</span> <span class="nv">voice</span><span class="p">:</span> <span class="o">.</span><span class="n">alloy</span><span class="p">,</span> <span class="nv">responseFormat</span><span class="p">:</span> <span class="o">.</span><span class="n">mp3</span><span class="p">,</span> <span class="nv">speed</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>

<span class="n">openAI</span><span class="o">.</span><span class="nf">audioCreateSpeech</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="c1">// Handle response here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">audioCreateSpeech</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>

<p><a href="https://platform.openai.com/docs/api-reference/audio/createSpeech">OpenAI Create Speech – Documentation</a></p>
<h4 id='audio-transcriptions' class='heading'>Audio Transcriptions</h4>

<p>Transcribes audio into the input language.</p>

<p><strong>Request</strong></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">AudioTranscriptionQuery</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">file</span><span class="p">:</span> <span class="kt">Data</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fileName</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">prompt</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">temperature</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">language</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
<span class="p">}</span>
</code></pre>

<p><strong>Response</strong></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">AudioTranscriptionResult</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">text</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>
</code></pre>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="kt">Data</span><span class="p">(</span><span class="nv">contentsOfURL</span><span class="p">:</span><span class="o">...</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">AudioTranscriptionQuery</span><span class="p">(</span><span class="nv">file</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="nv">fileName</span><span class="p">:</span> <span class="s">"audio.m4a"</span><span class="p">,</span> <span class="nv">model</span><span class="p">:</span> <span class="o">.</span><span class="n">whisper_1</span><span class="p">)</span>        

<span class="n">openAI</span><span class="o">.</span><span class="nf">audioTranscriptions</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="c1">//Handle result here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">audioTranscriptions</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>
<h4 id='audio-translations' class='heading'>Audio Translations</h4>

<p>Translates audio into into English.</p>

<p><strong>Request</strong></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">AudioTranslationQuery</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">file</span><span class="p">:</span> <span class="kt">Data</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">fileName</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">prompt</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">temperature</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
<span class="p">}</span>    
</code></pre>

<p><strong>Response</strong></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">AudioTranslationResult</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">text</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>
</code></pre>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="kt">Data</span><span class="p">(</span><span class="nv">contentsOfURL</span><span class="p">:</span><span class="o">...</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">AudioTranslationQuery</span><span class="p">(</span><span class="nv">file</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="nv">fileName</span><span class="p">:</span> <span class="s">"audio.m4a"</span><span class="p">,</span> <span class="nv">model</span><span class="p">:</span> <span class="o">.</span><span class="n">whisper_1</span><span class="p">)</span>  

<span class="n">openAI</span><span class="o">.</span><span class="nf">audioTranslations</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="c1">//Handle result here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">audioTranslations</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>

<p>Review <a href="https://platform.openai.com/docs/api-reference/audio">Audio Documentation</a> for more info.</p>
<h3 id='edits' class='heading'>Edits</h3>

<p>Creates a new edit for the provided input, instruction, and parameters.</p>

<p><strong>Request</strong></p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">EditsQuery</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="c1">/// ID of the model to use.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span>
    <span class="c1">/// Input text to get embeddings for.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">input</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    <span class="c1">/// The instruction that tells the model how to edit the prompt.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">instruction</span><span class="p">:</span> <span class="kt">String</span>
    <span class="c1">/// The number of images to generate. Must be between 1 and 10.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">n</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span>
    <span class="c1">/// What sampling temperature to use. Higher values means the model will take more risks. Try 0.9 for more creative applications, and 0 (argmax sampling) for ones with a well-defined answer.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">temperature</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
    <span class="c1">/// An alternative to sampling with temperature, called nucleus sampling, where the model considers the results of the tokens with top_p probability mass. So 0.1 means only the tokens comprising the top 10% probability mass are considered.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">topP</span><span class="p">:</span> <span class="kt">Double</span><span class="p">?</span>
<span class="p">}</span>
</code></pre>

<p><strong>Response</strong></p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">EditsResult</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Choice</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">text</span><span class="p">:</span> <span class="kt">String</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">index</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Usage</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">promptTokens</span><span class="p">:</span> <span class="kt">Int</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">completionTokens</span><span class="p">:</span> <span class="kt">Int</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">totalTokens</span><span class="p">:</span> <span class="kt">Int</span>

        <span class="kd">enum</span> <span class="kt">CodingKeys</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="kt">CodingKey</span> <span class="p">{</span>
            <span class="k">case</span> <span class="n">promptTokens</span> <span class="o">=</span> <span class="s">"prompt_tokens"</span>
            <span class="k">case</span> <span class="n">completionTokens</span> <span class="o">=</span> <span class="s">"completion_tokens"</span>
            <span class="k">case</span> <span class="n">totalTokens</span> <span class="o">=</span> <span class="s">"total_tokens"</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">created</span><span class="p">:</span> <span class="kt">TimeInterval</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">choices</span><span class="p">:</span> <span class="p">[</span><span class="kt">Choice</span><span class="p">]</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">usage</span><span class="p">:</span> <span class="kt">Usage</span>
<span class="p">}</span>
</code></pre>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">EditsQuery</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="o">.</span><span class="n">gpt4</span><span class="p">,</span> <span class="nv">input</span><span class="p">:</span> <span class="s">"What day of the wek is it?"</span><span class="p">,</span> <span class="nv">instruction</span><span class="p">:</span> <span class="s">"Fix the spelling mistakes"</span><span class="p">)</span>
<span class="n">openAI</span><span class="o">.</span><span class="nf">edits</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
  <span class="c1">//Handle response here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">edits</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>

<p>Review <a href="https://platform.openai.com/docs/api-reference/edits">Edits Documentation</a> for more info.</p>
<h3 id='embeddings' class='heading'>Embeddings</h3>

<p>Get a vector representation of a given input that can be easily consumed by machine learning models and algorithms.</p>

<p><strong>Request</strong></p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">EmbeddingsQuery</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="c1">/// ID of the model to use.</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span>
    <span class="c1">/// Input text to get embeddings for</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">input</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>
</code></pre>

<p><strong>Response</strong></p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">EmbeddingsResult</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Embedding</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>

        <span class="kd">public</span> <span class="k">let</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">String</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">embedding</span><span class="p">:</span> <span class="p">[</span><span class="kt">Double</span><span class="p">]</span>
        <span class="kd">public</span> <span class="k">let</span> <span class="nv">index</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="p">}</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">Embedding</span><span class="p">]</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">usage</span><span class="p">:</span> <span class="kt">Usage</span>
<span class="p">}</span>
</code></pre>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">EmbeddingsQuery</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="o">.</span><span class="n">textSearchBabbageDoc</span><span class="p">,</span> <span class="nv">input</span><span class="p">:</span> <span class="s">"The food was delicious and the waiter..."</span><span class="p">)</span>
<span class="n">openAI</span><span class="o">.</span><span class="nf">embeddings</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
  <span class="c1">//Handle response here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">embeddings</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>
<pre class="highlight plaintext"><code>(lldb) po result
▿ EmbeddingsResult
  ▿ data : 1 element
    ▿ 0 : Embedding
      - object : "embedding"
      ▿ embedding : 2048 elements
        - 0 : 0.0010535449
        - 1 : 0.024234328
        - 2 : -0.0084999
        - 3 : 0.008647452
    .......
        - 2044 : 0.017536353
        - 2045 : -0.005897616
        - 2046 : -0.026559394
        - 2047 : -0.016633155
      - index : 0

(lldb)
</code></pre>

<p>Review <a href="https://platform.openai.com/docs/api-reference/embeddings">Embeddings Documentation</a> for more info.</p>
<h3 id='models' class='heading'>Models</h3>

<p>Models are represented as a typealias <code>typealias Model = String</code>.</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">extension</span> <span class="kt">Model</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt4_turbo_preview</span> <span class="o">=</span> <span class="s">"gpt-4-turbo-preview"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt4_vision_preview</span> <span class="o">=</span> <span class="s">"gpt-4-vision-preview"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt4_0125_preview</span> <span class="o">=</span> <span class="s">"gpt-4-0125-preview"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt4_1106_preview</span> <span class="o">=</span> <span class="s">"gpt-4-1106-preview"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt4</span> <span class="o">=</span> <span class="s">"gpt-4"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt4_0613</span> <span class="o">=</span> <span class="s">"gpt-4-0613"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt4_0314</span> <span class="o">=</span> <span class="s">"gpt-4-0314"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt4_32k</span> <span class="o">=</span> <span class="s">"gpt-4-32k"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt4_32k_0613</span> <span class="o">=</span> <span class="s">"gpt-4-32k-0613"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt4_32k_0314</span> <span class="o">=</span> <span class="s">"gpt-4-32k-0314"</span>

    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt3_5Turbo</span> <span class="o">=</span> <span class="s">"gpt-3.5-turbo"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt3_5Turbo_0125</span> <span class="o">=</span> <span class="s">"gpt-3.5-turbo-0125"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt3_5Turbo_1106</span> <span class="o">=</span> <span class="s">"gpt-3.5-turbo-1106"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt3_5Turbo_0613</span> <span class="o">=</span> <span class="s">"gpt-3.5-turbo-0613"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt3_5Turbo_0301</span> <span class="o">=</span> <span class="s">"gpt-3.5-turbo-0301"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt3_5Turbo_16k</span> <span class="o">=</span> <span class="s">"gpt-3.5-turbo-16k"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">gpt3_5Turbo_16k_0613</span> <span class="o">=</span> <span class="s">"gpt-3.5-turbo-16k-0613"</span>

    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textDavinci_003</span> <span class="o">=</span> <span class="s">"text-davinci-003"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textDavinci_002</span> <span class="o">=</span> <span class="s">"text-davinci-002"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textCurie</span> <span class="o">=</span> <span class="s">"text-curie-001"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textBabbage</span> <span class="o">=</span> <span class="s">"text-babbage-001"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textAda</span> <span class="o">=</span> <span class="s">"text-ada-001"</span>

    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textDavinci_001</span> <span class="o">=</span> <span class="s">"text-davinci-001"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">codeDavinciEdit_001</span> <span class="o">=</span> <span class="s">"code-davinci-edit-001"</span>

    <span class="kd">static</span> <span class="k">let</span> <span class="nv">tts_1</span> <span class="o">=</span> <span class="s">"tts-1"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">tts_1_hd</span> <span class="o">=</span> <span class="s">"tts-1-hd"</span>

    <span class="kd">static</span> <span class="k">let</span> <span class="nv">whisper_1</span> <span class="o">=</span> <span class="s">"whisper-1"</span>

    <span class="kd">static</span> <span class="k">let</span> <span class="nv">dall_e_2</span> <span class="o">=</span> <span class="s">"dall-e-2"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">dall_e_3</span> <span class="o">=</span> <span class="s">"dall-e-3"</span>

    <span class="kd">static</span> <span class="k">let</span> <span class="nv">davinci</span> <span class="o">=</span> <span class="s">"davinci"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">curie</span> <span class="o">=</span> <span class="s">"curie"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">babbage</span> <span class="o">=</span> <span class="s">"babbage"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">ada</span> <span class="o">=</span> <span class="s">"ada"</span>

    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textEmbeddingAda</span> <span class="o">=</span> <span class="s">"text-embedding-ada-002"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textSearchAda</span> <span class="o">=</span> <span class="s">"text-search-ada-doc-001"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textSearchBabbageDoc</span> <span class="o">=</span> <span class="s">"text-search-babbage-doc-001"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textSearchBabbageQuery001</span> <span class="o">=</span> <span class="s">"text-search-babbage-query-001"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textEmbedding3</span> <span class="o">=</span> <span class="s">"text-embedding-3-small"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textEmbedding3Large</span> <span class="o">=</span> <span class="s">"text-embedding-3-large"</span>

    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textModerationStable</span> <span class="o">=</span> <span class="s">"text-moderation-stable"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">textModerationLatest</span> <span class="o">=</span> <span class="s">"text-moderation-latest"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">moderation</span> <span class="o">=</span> <span class="s">"text-moderation-007"</span>
<span class="p">}</span>
</code></pre>

<p>GPT-4 models are supported. </p>

<p>As an example: To use the <code>gpt-4-turbo-preview</code> model, pass <code>.gpt4_turbo_preview</code> as the parameter to the <code><a href="Structs/ChatQuery.html">ChatQuery</a></code> init.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">ChatQuery</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="o">.</span><span class="n">gpt4_turbo_preview</span><span class="p">,</span> <span class="nv">messages</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">role</span><span class="p">:</span> <span class="o">.</span><span class="n">system</span><span class="p">,</span> <span class="nv">content</span><span class="p">:</span> <span class="s">"You are Librarian-GPT. You know everything about the books."</span><span class="p">),</span>
    <span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">role</span><span class="p">:</span> <span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="nv">content</span><span class="p">:</span> <span class="s">"Who wrote Harry Potter?"</span><span class="p">)</span>
<span class="p">])</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">chats</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
<span class="kt">XCTAssertFalse</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">choices</span><span class="o">.</span><span class="n">isEmpty</span><span class="p">)</span>
</code></pre>

<p>You can also pass a custom string if you need to use some model, that is not represented above.</p>
<h4 id='list-models' class='heading'>List Models</h4>

<p>Lists the currently available models.</p>

<p><strong>Response</strong></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">ModelsResult</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">ModelResult</span><span class="p">]</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>

</code></pre>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="n">openAI</span><span class="o">.</span><span class="nf">models</span><span class="p">()</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
  <span class="c1">//Handle result here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">models</span><span class="p">()</span>
</code></pre>
<h4 id='retrieve-model' class='heading'>Retrieve Model</h4>

<p>Retrieves a model instance, providing ownership information.</p>

<p><strong>Request</strong></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">ModelQuery</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span>
<span class="p">}</span>    
</code></pre>

<p><strong>Response</strong></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">ModelResult</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Model</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">object</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">ownedBy</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>
</code></pre>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">ModelQuery</span><span class="p">(</span><span class="nv">model</span><span class="p">:</span> <span class="o">.</span><span class="n">gpt4</span><span class="p">)</span>
<span class="n">openAI</span><span class="o">.</span><span class="nf">model</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
  <span class="c1">//Handle result here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">model</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>

<p>Review <a href="https://platform.openai.com/docs/api-reference/models">Models Documentation</a> for more info.</p>
<h3 id='moderations' class='heading'>Moderations</h3>

<p>Given a input text, outputs if the model classifies it as violating OpenAI&rsquo;s content policy.</p>

<p><strong>Request</strong></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">ModerationsQuery</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">input</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span><span class="p">?</span>
<span class="p">}</span>    
</code></pre>

<p><strong>Response</strong></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">ModerationsResult</span><span class="p">:</span> <span class="kt">Codable</span><span class="p">,</span> <span class="kt">Equatable</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">String</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">model</span><span class="p">:</span> <span class="kt">Model</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">results</span><span class="p">:</span> <span class="p">[</span><span class="kt">CategoryResult</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">ModerationsQuery</span><span class="p">(</span><span class="nv">input</span><span class="p">:</span> <span class="s">"I want to kill them."</span><span class="p">)</span>
<span class="n">openAI</span><span class="o">.</span><span class="nf">moderations</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
  <span class="c1">//Handle result here</span>
<span class="p">}</span>
<span class="c1">//or</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="k">await</span> <span class="n">openAI</span><span class="o">.</span><span class="nf">moderations</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
</code></pre>

<p>Review <a href="https://platform.openai.com/docs/api-reference/moderations">Moderations Documentation</a> for more info.</p>
<h3 id='utilities' class='heading'>Utilities</h3>

<p>The component comes with several handy utility functions to work with the vectors.</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Vector</span> <span class="p">{</span>

    <span class="c1">/// Returns the similarity between two vectors</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameters:</span>
    <span class="c1">///     - a: The first vector</span>
    <span class="c1">///     - b: The second vector</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">func</span> <span class="nf">cosineSimilarity</span><span class="p">(</span><span class="nv">a</span><span class="p">:</span> <span class="p">[</span><span class="kt">Double</span><span class="p">],</span> <span class="nv">b</span><span class="p">:</span> <span class="p">[</span><span class="kt">Double</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">Double</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nf">mag</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="nf">mag</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
    <span class="p">}</span>

    <span class="c1">/// Returns the difference between two vectors. Cosine distance is defined as `1 - cosineSimilarity(a, b)`</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameters:</span>
    <span class="c1">///     - a: The first vector</span>
    <span class="c1">///     - b: The second vector</span>
    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">cosineDifference</span><span class="p">(</span><span class="nv">a</span><span class="p">:</span> <span class="p">[</span><span class="kt">Double</span><span class="p">],</span> <span class="nv">b</span><span class="p">:</span> <span class="p">[</span><span class="kt">Double</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">Double</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="k">Self</span><span class="o">.</span><span class="nf">cosineSimilarity</span><span class="p">(</span><span class="nv">a</span><span class="p">:</span> <span class="n">a</span><span class="p">,</span> <span class="nv">b</span><span class="p">:</span> <span class="n">b</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p><strong>Example</strong></p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">vector1</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.213123</span><span class="p">,</span> <span class="mf">0.3214124</span><span class="p">,</span> <span class="mf">0.421412</span><span class="p">,</span> <span class="mf">0.3214521251</span><span class="p">,</span> <span class="mf">0.412412</span><span class="p">,</span> <span class="mf">0.3214124</span><span class="p">,</span> <span class="mf">0.1414124</span><span class="p">,</span> <span class="mf">0.3214521251</span><span class="p">,</span> <span class="mf">0.213123</span><span class="p">,</span> <span class="mf">0.3214124</span><span class="p">,</span> <span class="mf">0.1414124</span><span class="p">,</span> <span class="mf">0.4214214</span><span class="p">,</span> <span class="mf">0.213123</span><span class="p">,</span> <span class="mf">0.3214124</span><span class="p">,</span> <span class="mf">0.1414124</span><span class="p">,</span> <span class="mf">0.3214521251</span><span class="p">,</span> <span class="mf">0.213123</span><span class="p">,</span> <span class="mf">0.3214124</span><span class="p">,</span> <span class="mf">0.1414124</span><span class="p">,</span> <span class="mf">0.3214521251</span><span class="p">]</span>
<span class="k">let</span> <span class="nv">vector2</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.213123</span><span class="p">,</span> <span class="mf">0.3214124</span><span class="p">,</span> <span class="mf">0.1414124</span><span class="p">,</span> <span class="mf">0.3214521251</span><span class="p">,</span> <span class="mf">0.213123</span><span class="p">,</span> <span class="mf">0.3214124</span><span class="p">,</span> <span class="mf">0.1414124</span><span class="p">,</span> <span class="mf">0.3214521251</span><span class="p">,</span> <span class="mf">0.213123</span><span class="p">,</span> <span class="mf">0.511515</span><span class="p">,</span> <span class="mf">0.1414124</span><span class="p">,</span> <span class="mf">0.3214521251</span><span class="p">,</span> <span class="mf">0.213123</span><span class="p">,</span> <span class="mf">0.3214124</span><span class="p">,</span> <span class="mf">0.1414124</span><span class="p">,</span> <span class="mf">0.3214521251</span><span class="p">,</span> <span class="mf">0.213123</span><span class="p">,</span> <span class="mf">0.3214124</span><span class="p">,</span> <span class="mf">0.1414124</span><span class="p">,</span> <span class="mf">0.3213213</span><span class="p">]</span>
<span class="k">let</span> <span class="nv">similarity</span> <span class="o">=</span> <span class="kt">Vector</span><span class="o">.</span><span class="nf">cosineSimilarity</span><span class="p">(</span><span class="nv">a</span><span class="p">:</span> <span class="n">vector1</span><span class="p">,</span> <span class="nv">b</span><span class="p">:</span> <span class="n">vector2</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">similarity</span><span class="p">)</span> <span class="c1">//0.9510201910206734</span>
</code></pre>

<blockquote>
<p>In data analysis, cosine similarity is a measure of similarity between two sequences of numbers.</p>
</blockquote>

<p><img width="574" alt="Screenshot 2022-12-19 at 6 00 33 PM" src="https://user-images.githubusercontent.com/1411778/208467903-000b52d8-6589-40dd-b020-eeed69e8d284.png"></p>

<p>Read more about Cosine Similarity <a href="https://en.wikipedia.org/wiki/Cosine_similarity">here</a>.</p>
<h3 id='combine-extensions' class='heading'>Combine Extensions</h3>

<p>The library contains built-in <a href="https://developer.apple.com/documentation/combine">Combine</a> extensions.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">completions</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">CompletionsQuery</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyPublisher</span><span class="o">&lt;</span><span class="kt">CompletionsResult</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span>
<span class="kd">func</span> <span class="nf">images</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">ImagesQuery</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyPublisher</span><span class="o">&lt;</span><span class="kt">ImagesResult</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span>
<span class="kd">func</span> <span class="nf">embeddings</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">EmbeddingsQuery</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyPublisher</span><span class="o">&lt;</span><span class="kt">EmbeddingsResult</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span>
<span class="kd">func</span> <span class="nf">chats</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">ChatQuery</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyPublisher</span><span class="o">&lt;</span><span class="kt">ChatResult</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span>
<span class="kd">func</span> <span class="nf">edits</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">EditsQuery</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyPublisher</span><span class="o">&lt;</span><span class="kt">EditsResult</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span>
<span class="kd">func</span> <span class="nf">model</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">ModelQuery</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyPublisher</span><span class="o">&lt;</span><span class="kt">ModelResult</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span>
<span class="kd">func</span> <span class="nf">models</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">AnyPublisher</span><span class="o">&lt;</span><span class="kt">ModelsResult</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span>
<span class="kd">func</span> <span class="nf">moderations</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">ModerationsQuery</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyPublisher</span><span class="o">&lt;</span><span class="kt">ModerationsResult</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span>
<span class="kd">func</span> <span class="nf">audioTranscriptions</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">AudioTranscriptionQuery</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyPublisher</span><span class="o">&lt;</span><span class="kt">AudioTranscriptionResult</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span>
<span class="kd">func</span> <span class="nf">audioTranslations</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">AudioTranslationQuery</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AnyPublisher</span><span class="o">&lt;</span><span class="kt">AudioTranslationResult</span><span class="p">,</span> <span class="kt">Error</span><span class="o">&gt;</span>
</code></pre>
<h2 id='example-project' class='heading'>Example Project</h2>

<p>You can find example iOS application in <a href="/Demo">Demo</a> folder. </p>

<p><img src="https://user-images.githubusercontent.com/1411778/231449395-2ad6bab6-c21f-43dc-8977-f45f505b609d.png" alt="mockuuups-iphone-13-pro-mockup-perspective-right"></p>
<h2 id='contribution-guidelines' class='heading'>Contribution Guidelines</h2>

<p>Make your Pull Requests clear and obvious to anyone viewing them.<br>
Set <code>main</code> as your target branch.</p>
<h4 id='use-a-href-https-www-conventionalcommits-org-en-v1-0-0-conventional-commits-a-principles-in-naming-prs-and-branches' class='heading'>Use <a href="https://www.conventionalcommits.org/en/v1.0.0/">Conventional Commits</a> principles in naming PRs and branches:</h4>

<ul>
<li><code>Feat: ...</code> for new features and new functionality implementations.</li>
<li><code>Bug: ...</code> for bug fixes.</li>
<li><code>Fix: ...</code> for minor issues fixing, like typos or inaccuracies in code.</li>
<li><code>Chore: ...</code> for boring stuff like code polishing, refactoring, deprecation fixing etc.</li>
</ul>

<p>PR naming example: <code>Feat: Add Threads API handling</code> or <code>Bug: Fix message result duplication</code></p>

<p>Branch naming example: <code>feat/add-threads-API-handling</code> or <code>bug/fix-message-result-duplication</code></p>
<h4 id='write-description-to-pull-requests-in-following-format' class='heading'>Write description to pull requests in following format:</h4>

<ul>
<li>What</li>
</ul>

<p>&hellip;</p>

<ul>
<li>Why</li>
</ul>

<p>&hellip;</p>

<ul>
<li>Affected Areas</li>
</ul>

<p>&hellip;</p>

<ul>
<li>More Info</li>
</ul>

<p>&hellip;</p>

<p>We&rsquo;ll appreciate you including tests to your code if it is needed and possible. ❤️</p>
<h2 id='links' class='heading'>Links</h2>

<ul>
<li><a href="https://platform.openai.com/docs/introduction">OpenAI Documentation</a></li>
<li><a href="https://platform.openai.com/playground">OpenAI Playground</a></li>
<li><a href="https://platform.openai.com/examples">OpenAI Examples</a></li>
<li><a href="https://labs.openai.com/">Dall-E</a></li>
<li><a href="https://en.wikipedia.org/wiki/Cosine_similarity">Cosine Similarity</a></li>
</ul>
<h2 id='license' class='heading'>License</h2>
<pre class="highlight plaintext"><code>MIT License

Copyright (c) 2023 MacPaw Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2024 <a class="link" href="" target="_blank" rel="external noopener"></a>. All rights reserved. (Last updated: 2024-10-17)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.15.2</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
